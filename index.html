<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendário de Disponibilidade - Canto da Música</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; }
        
        /* Layout de Grade Fixa */
        .calendar-wrapper { min-width: 1100px; }
        .calendar-grid {
            display: grid;
            grid-template-columns: 80px repeat(6, 1fr);
            gap: 1px;
            background-color: #e2e8f0;
        }

        /* Estilização de Cabeçalhos */
        .sticky-header { position: sticky; top: 0; z-index: 30; }
        .day-header { 
            background: #0f172a; 
            color: white; 
            padding: 14px 8px; 
            font-weight: 800; 
            text-align: center; 
            text-transform: uppercase; 
            font-size: 0.75rem; 
            letter-spacing: 0.1em;
        }

        .time-col { 
            background: #f1f5f9; 
            font-weight: 700; 
            color: #475569; 
            font-size: 0.7rem; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            border-right: 1px solid #e2e8f0;
        }

        /* Slots de Horário */
        .slot { 
            background: white; 
            min-height: 110px; 
            padding: 4px; 
            display: flex; 
            flex-direction: column; 
            gap: 4px; 
            transition: background 0.2s;
        }
        .slot:hover { background-color: #fcfcfd; }

        /* Card de Curso */
        .course-card {
            border-radius: 4px;
            padding: 4px 6px;
            border-left-width: 4px;
            transition: all 0.2s ease;
            cursor: pointer;
        }
        .course-card:hover { transform: translateX(2px); filter: brightness(0.95); }
        .course-card.filtered-out { opacity: 0.1; filter: grayscale(1); pointer-events: none; }

        .course-label {
            font-size: 8px;
            font-weight: 900;
            text-transform: uppercase;
            margin-bottom: 2px;
            display: block;
            letter-spacing: 0.02em;
        }

        .prof-list {
            font-size: 10px;
            font-weight: 600;
            display: flex;
            flex-wrap: wrap;
            gap: 4px;
        }

        /* Temas por Curso */
        .theme-cordas { background: #f0fdf4; border-color: #22c55e; color: #166534; }
        .theme-violino { background: #fdf2f8; border-color: #ec4899; color: #9d174d; }
        .theme-canto { background: #fef2f2; border-color: #ef4444; color: #991b1b; }
        .theme-bateria { background: #fffbeb; border-color: #f59e0b; color: #92400e; }
        .theme-teclas { background: #eef2ff; border-color: #6366f1; color: #3730a3; }
        .theme-musicalizacao { background: #faf5ff; border-color: #a855f7; color: #6b21a8; }
        .theme-teatro { background: #f0f9ff; border-color: #0ea5e9; color: #075985; }
        .theme-baixo { background: #f1f5f9; border-color: #64748b; color: #1e293b; }
        .theme-banda { background: #fff7ed; border-color: #f97316; color: #9a3412; }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: #f1f5f9; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
    </style>
</head>
<body class="antialiased text-slate-900">

    <div class="max-w-[1600px] mx-auto p-4 lg:p-6">
        <header class="flex flex-col xl:flex-row justify-between items-start xl:items-center mb-8 gap-6">
            <div class="flex items-center gap-4">
                <div class="bg-indigo-600 p-3 rounded-xl shadow-lg shadow-indigo-200 text-white">
                    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"></path></svg>
                </div>
                <div>
                    <h1 class="text-3xl font-extrabold text-slate-900 tracking-tight">Canto da Música</h1>
                    <p class="text-slate-500 font-medium">Agenda Estratégica de Disponibilidade Presencial</p>
                </div>
            </div>

            <div class="flex flex-wrap items-center gap-4 bg-white p-2 rounded-2xl shadow-sm border border-slate-200 w-full xl:w-auto">
                <!-- Filtro de Curso -->
                <div class="px-3 border-r border-slate-100">
                    <label class="block text-[10px] font-bold text-slate-400 uppercase mb-1">Filtrar Curso</label>
                    <select id="course-filter" onchange="applyFilter()" class="text-sm font-bold text-indigo-600 focus:outline-none bg-transparent cursor-pointer">
                        <option value="all">Mostrar Todos</option>
                    </select>
                </div>
                <!-- Toggle Unidade -->
                <div class="flex bg-slate-100 p-1 rounded-xl">
                    <button onclick="switchUnit('sbc')" id="btn-sbc" class="px-6 py-2 text-sm font-bold rounded-lg transition-all duration-200">SBC</button>
                    <button onclick="switchUnit('scs')" id="btn-scs" class="px-6 py-2 text-sm font-bold rounded-lg transition-all duration-200">SCS</button>
                </div>
            </div>
        </header>

        <!-- Grid Principal -->
        <div class="bg-white rounded-3xl shadow-2xl shadow-slate-200 border border-slate-200 overflow-hidden">
            <div class="overflow-x-auto">
                <div class="calendar-wrapper">
                    <div class="calendar-grid" id="calendar">
                        <!-- Header (Sticky) -->
                        <div class="bg-slate-900 z-40"></div>
                        <div class="day-header sticky-header">Segunda</div>
                        <div class="day-header sticky-header">Terça</div>
                        <div class="day-header sticky-header">Quarta</div>
                        <div class="day-header sticky-header">Quinta</div>
                        <div class="day-header sticky-header">Sexta</div>
                        <div class="day-header sticky-header">Sábado</div>
                        
                        <!-- Conteúdo será injetado pelo JS -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Rodapé Informativo -->
        <div class="mt-8 grid grid-cols-1 md:grid-cols-3 gap-6">
            <div class="bg-white p-5 rounded-2xl border border-slate-200 shadow-sm">
                <h4 class="text-xs font-black text-slate-400 uppercase tracking-widest mb-3">Logística Marcela S.</h4>
                <div class="space-y-2">
                    <div class="flex justify-between text-sm"><span class="font-bold">SBC:</span> <span class="text-slate-600">Seg e Qua (Manhã)</span></div>
                    <div class="flex justify-between text-sm"><span class="font-bold">SCS:</span> <span class="text-slate-600">Qui (Tarde) e Sex (Manhã)</span></div>
                </div>
            </div>
            <div class="bg-white p-5 rounded-2xl border border-slate-200 shadow-sm">
                <h4 class="text-xs font-black text-slate-400 uppercase tracking-widest mb-3">Destaque do Time</h4>
                <p class="text-xs text-slate-600 leading-relaxed">
                    <strong>Luan (SBC):</strong> Foco em Baixo até as 22h.<br>
                    <strong>Augusto (SBC):</strong> Presencial Ter/Qua (14-16h) e Qui (Noite).
                </p>
            </div>
            <div class="bg-indigo-600 p-5 rounded-2xl shadow-lg shadow-indigo-100 text-white flex items-center gap-4">
                <div class="bg-white/20 p-2 rounded-lg">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                </div>
                <p class="text-xs font-medium leading-tight">Use o filtro no topo para localizar rapidamente horários de uma modalidade específica na semana.</p>
            </div>
        </div>
    </div>

    <script>
        const courseConfig = {
            "Cordas": { label: "Cordas", class: "theme-cordas" },
            "Violino": { label: "Violino", class: "theme-violino" },
            "Canto": { label: "Canto", class: "theme-canto" },
            "Bateria": { label: "Bateria", class: "theme-bateria" },
            "Teclas": { label: "Teclas", class: "theme-teclas" },
            "Musicalização": { label: "Musicalização", class: "theme-musicalizacao" },
            "Teatro": { label: "Teatro", class: "theme-teatro" },
            "Baixo": { label: "Baixo", class: "theme-baixo" },
            "Prática de Banda": { label: "Prática de Banda", class: "theme-banda" }
        };

        const teachers = [
            { name: "Ariel", courses: ["Canto", "Prática de Banda"], units: ["scs"], schedule: [] },
            { 
                name: "Augusto", courses: ["Cordas", "Prática de Banda"], units: ["sbc"], 
                schedule: [
                    { d: 2, h: [14,15] }, 
                    { d: 3, h: [14,15] }, 
                    { d: 4, h: [16,17,18,19,20] } 
                ] 
            },
            { 
                name: "Caio", courses: ["Bateria", "Prática de Banda"], units: ["scs"], 
                schedule: [{ d: 1, h: [9,10,11,12,13,14,15,16,17,18,19,20] }, { d: 2, h: [9,10,11,12,13,14,15,16,17,18,19,20] }, { d: 3, h: [9,10,11,12,13,14,15,16,17,18,19,20] }, { d: 4, h: [9,10,11,12,13,14,15,16,17,18,19,20] }] 
            },
            { 
                name: "Danilo", courses: ["Cordas", "Prática de Banda"], units: ["sbc"], 
                schedule: [{ d: 3, h: [14,15,16,17,18,19,20] }, { d: 4, h: [14,15] }] 
            },
            { 
                name: "Gabriel C.", courses: ["Cordas", "Teclas", "Prática de Banda"], units: ["scs"], 
                schedule: [
                    { d: 1, h: [9,10,11,12,13,14,15,16,17,18,19,20] }, 
                    { d: 2, h: [9,10,11,12,13,14,15,16,17] }, 
                    { d: 3, h: [9,10,11,12,13] }, 
                    { d: 4, h: [9,10,11,12,13,14] }, 
                    { d: 5, h: [9,10,11,12,13,14,15,16,17,18,19,20] }, 
                    { d: 6, h: [9] }
                ] 
            },
            { 
                name: "G. Fernandes", courses: ["Cordas", "Teclas", "Prática de Banda"], units: ["scs"], 
                schedule: [{ d: 4, h: [9,10,11,12,13,14,15,16,17,18,19,20] }, { d: 5, h: [9,10,11,12,13,14,15,16] }] 
            },
            { 
                name: "Moretti", courses: ["Canto", "Teclas", "Prática de Banda"], units: ["sbc"], 
                schedule: [
                    { d: 1, h: [13,14,15] }, 
                    { d: 2, h: [13,14,15] }, 
                    { d: 3, h: [13,14,15,16] }, 
                    { d: 4, h: [13,14,15,16] },
                    { d: 5, h: [13,14,15,16] }
                ] 
            },
            { name: "Jonathas", courses: ["Canto", "Prática de Banda"], units: ["sbc"], schedule: [{ d: 5, h: [13,14,15] }] },
            { 
                name: "Karen", courses: ["Canto", "Prática de Banda"], units: ["sbc", "scs"], 
                schedule: [{ d: 2, h: [10,11,12,13,14] }, { d: 3, h: [10,11,12,13,14] }, { d: 4, h: [10,11,12,13,14] }, { d: 5, h: [10,11,12,13,14] }, { d: 6, h: [10,11,12,13,14] }] 
            },
            { 
                name: "Luan", courses: ["Baixo", "Prática de Banda"], units: ["sbc"], 
                schedule: [
                    { d: 1, h: [17,18,19,20,21] }, 
                    { d: 2, h: [10,11,12,13,14,15,16,17,18,19,20,21] }, 
                    { d: 3, h: [10,11,12,13,14,15,16,17,18,19,20,21] }, 
                    { d: 4, h: [12,13,14,15,16] }
                ] 
            },
            { 
                name: "Lucas K.", courses: ["Cordas", "Teclas", "Musicalização", "Prática de Banda"], units: ["sbc", "scs"], 
                schedule: [
                    { d: 1, h: [9,10,11,12,13,14,15] }, 
                    { d: 2, h: [9,10,11] }, 
                    { d: 4, h: [9,10,11] }, 
                    { d: 5, h: [18,19,20] }, 
                    { d: 6, h: [13,14,15,16] }
                ] 
            },
            { 
                name: "Marcela S.", courses: ["Violino", "Musicalização", "Teatro", "Prática de Banda"], units: ["sbc", "scs"], 
                schedule: [
                    { d: 1, h: [9,10,11], u: 'sbc' }, 
                    { d: 3, h: [9,10,11], u: 'sbc' }, 
                    { d: 4, h: [14,15,16,17], u: 'scs' }, 
                    { d: 5, h: [9,10,11], u: 'scs' }
                ] 
            },
            { name: "Marina", courses: ["Musicalização", "Prática de Banda"], units: ["sbc"], schedule: [{ d: 1, h: [9,10,11,12,13,14,15] }, { d: 4, h: [9,10,11] }] },
            { name: "Thales", courses: ["Cordas", "Teclas"], units: ["scs"], schedule: [{ d: 2, h: [18] }, { d: 5, h: [13] }] },
            { name: "Júlia", courses: ["Violino"], units: ["scs"], schedule: [{ d: 4, h: [14,15] }] }
        ];

        let currentUnit = 'sbc';
        let currentFilter = 'all';

        function init() {
            // Popular Filtro
            const filter = document.getElementById('course-filter');
            Object.keys(courseConfig).forEach(key => {
                const opt = document.createElement('option');
                opt.value = key;
                opt.textContent = courseConfig[key].label;
                filter.appendChild(opt);
            });
            render();
        }

        function applyFilter() {
            currentFilter = document.getElementById('course-filter').value;
            render();
        }

        function switchUnit(unit) {
            currentUnit = unit;
            document.getElementById('btn-sbc').className = unit === 'sbc' ? 'px-6 py-2 text-sm font-bold rounded-lg bg-indigo-600 text-white shadow-md' : 'px-6 py-2 text-sm font-bold rounded-lg text-slate-600 hover:bg-slate-200';
            document.getElementById('btn-scs').className = unit === 'scs' ? 'px-6 py-2 text-sm font-bold rounded-lg bg-indigo-600 text-white shadow-md' : 'px-6 py-2 text-sm font-bold rounded-lg text-slate-600 hover:bg-slate-200';
            render();
        }

        function render() {
            const grid = document.getElementById('calendar');
            const items = grid.querySelectorAll('.time-col, .slot');
            items.forEach(el => el.remove());

            for (let h = 9; h <= 21; h++) {
                // Coluna de Hora
                const timeCol = document.createElement('div');
                timeCol.className = 'time-col';
                timeCol.textContent = `${h}:00`;
                grid.appendChild(timeCol);

                for (let d = 1; d <= 6; d++) {
                    const slot = document.createElement('div');
                    slot.className = 'slot';

                    // Processar dados do slot
                    const coursesInSlot = {};

                    teachers.forEach(teacher => {
                        const inUnit = teacher.units.includes(currentUnit);
                        const hasSched = teacher.schedule.some(s => {
                            const uMatch = s.u ? s.u === currentUnit : true;
                            return s.d === d && s.h.includes(h) && uMatch;
                        });

                        if (inUnit && hasSched) {
                            teacher.courses.forEach(c => {
                                if (!coursesInSlot[c]) coursesInSlot[c] = [];
                                if (!coursesInSlot[c].includes(teacher.name)) coursesInSlot[c].push(teacher.name);
                            });
                        }
                    });

                    // Renderizar cards de cursos
                    Object.keys(courseConfig).forEach(courseKey => {
                        if (coursesInSlot[courseKey]) {
                            const isFiltered = currentFilter !== 'all' && currentFilter !== courseKey;
                            
                            const card = document.createElement('div');
                            card.className = `course-card ${courseConfig[courseKey].class} ${isFiltered ? 'filtered-out' : ''}`;
                            
                            const label = document.createElement('span');
                            label.className = 'course-label';
                            label.textContent = courseConfig[courseKey].label;
                            
                            const proflist = document.createElement('div');
                            proflist.className = 'prof-list';
                            proflist.textContent = coursesInSlot[courseKey].join(', ');

                            card.appendChild(label);
                            card.appendChild(proflist);
                            slot.appendChild(card);
                        }
                    });

                    grid.appendChild(slot);
                }
            }
        }

        window.onload = init;
    </script>
</body>
</html>
