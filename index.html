<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade de Disponibilidade por Idade - Canto da Música</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; }
        
        .calendar-wrapper { min-width: 1200px; }
        .calendar-grid {
            display: grid;
            grid-template-columns: 80px repeat(6, 1fr);
            gap: 1px;
            background-color: #e2e8f0;
        }

        .sticky-header { position: sticky; top: 0; z-index: 30; }
        .day-header { 
            background: #0f172a; 
            color: white; 
            padding: 16px 8px; 
            font-weight: 800; 
            text-align: center; 
            text-transform: uppercase; 
            font-size: 0.7rem; 
            letter-spacing: 0.1em;
        }

        .time-col { 
            background: #f1f5f9; 
            font-weight: 700; 
            color: #475569; 
            font-size: 0.65rem; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            border-right: 1px solid #e2e8f0;
        }

        .slot { 
            background: white; 
            min-height: 120px; 
            padding: 4px; 
            display: flex; 
            flex-direction: column; 
            gap: 4px; 
        }

        /* Card de Idade - O foco principal agora */
        .age-card {
            border-radius: 6px;
            padding: 5px 8px;
            border-top: 3px solid transparent;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
            transition: all 0.2s ease;
        }
        .age-card.filtered-out { opacity: 0.05; filter: grayscale(1); pointer-events: none; }

        .age-group-label {
            font-size: 8px;
            font-weight: 900;
            text-transform: uppercase;
            margin-bottom: 2px;
            display: block;
            letter-spacing: 0.05em;
        }

        .course-prof-info {
            font-size: 10px;
            font-weight: 600;
            line-height: 1.2;
        }

        /* Temas por Faixa Etária (Cores Semânticas) */
        /* Educação Infantil: 4-5 anos */
        .age-infantil { background: #fdf2f8; border-color: #ec4899; color: #9d174d; }
        /* Fundamental 1: 6-10 anos */
        .age-fund1 { background: #f0fdf4; border-color: #22c55e; color: #166534; }
        /* Fundamental 2: 11-14 anos */
        .age-fund2 { background: #eff6ff; border-color: #3b82f6; color: #1e40af; }
        /* Jovens e Adultos: 15+ anos */
        .age-adulto { background: #f1f5f9; border-color: #64748b; color: #1e293b; }

        .unit-toggle button.active { background-color: #4f46e5; color: white; box-shadow: 0 4px 6px -1px rgba(79, 70, 229, 0.4); }
    </style>
</head>
<body class="antialiased text-slate-900 pb-12">

    <div class="max-w-[1700px] mx-auto p-4 lg:p-8">
        <header class="flex flex-col xl:flex-row justify-between items-start xl:items-center mb-8 gap-6">
            <div class="flex items-center gap-5">
                <div class="bg-indigo-600 p-4 rounded-2xl shadow-xl shadow-indigo-100 text-white">
                    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>
                </div>
                <div>
                    <h1 class="text-3xl font-black text-slate-900 tracking-tight">Canto da Música</h1>
                    <p class="text-slate-500 font-bold uppercase text-xs tracking-widest">Painel de Vendas: Disponibilidade por Idade</p>
                </div>
            </div>

            <div class="flex flex-wrap items-center gap-4 bg-white p-2 rounded-2xl shadow-sm border border-slate-200 w-full xl:w-auto">
                <div class="px-4 border-r border-slate-100">
                    <label class="block text-[10px] font-black text-slate-400 uppercase mb-1">Filtrar Faixa Etária</label>
                    <select id="age-filter" onchange="applyFilter()" class="text-sm font-extrabold text-indigo-600 focus:outline-none bg-transparent cursor-pointer">
                        <option value="all">Todas as Idades</option>
                        <option value="infantil">Infantil (4-5a)</option>
                        <option value="fund1">Fund. 1 (6-10a)</option>
                        <option value="fund2">Fund. 2 (11-14a)</option>
                        <option value="adulto">Jovens/Adultos (15+)</option>
                    </select>
                </div>
                <div class="flex bg-slate-100 p-1 rounded-xl">
                    <button onclick="switchUnit('sbc')" id="btn-sbc" class="active px-8 py-2 text-sm font-black rounded-lg transition-all duration-200">SÃO BERNARDO</button>
                    <button onclick="switchUnit('scs')" id="btn-scs" class="px-8 py-2 text-sm font-black rounded-lg transition-all duration-200 text-slate-500 hover:bg-slate-200">SÃO CAETANO</button>
                </div>
            </div>
        </header>

        <!-- Legenda Visual para os Pais -->
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
            <div class="bg-pink-50 border-l-4 border-pink-500 p-3 rounded-r-xl">
                <span class="block text-[10px] font-black text-pink-600 uppercase">Ed. Infantil</span>
                <span class="text-xs font-bold text-pink-900">4 a 5 Anos (Pré-Escola)</span>
            </div>
            <div class="bg-green-50 border-l-4 border-green-500 p-3 rounded-r-xl">
                <span class="block text-[10px] font-black text-green-600 uppercase">Ens. Fundamental 1</span>
                <span class="text-xs font-bold text-green-900">6 a 10 Anos (1º ao 5º ano)</span>
            </div>
            <div class="bg-blue-50 border-l-4 border-blue-500 p-3 rounded-r-xl">
                <span class="block text-[10px] font-black text-blue-600 uppercase">Ens. Fundamental 2</span>
                <span class="text-xs font-bold text-blue-900">11 a 14 Anos (6º ao 9º ano)</span>
            </div>
            <div class="bg-slate-100 border-l-4 border-slate-500 p-3 rounded-r-xl">
                <span class="block text-[10px] font-black text-slate-600 uppercase">Jovens e Adultos</span>
                <span class="text-xs font-bold text-slate-900">15+ Anos (Ensino Médio e Adultos)</span>
            </div>
        </div>

        <div class="bg-white rounded-3xl shadow-2xl border border-slate-200 overflow-hidden">
            <div class="overflow-x-auto">
                <div class="calendar-wrapper">
                    <div class="calendar-grid" id="calendar">
                        <div class="bg-slate-900 z-40"></div>
                        <div class="day-header sticky-header">Segunda</div>
                        <div class="day-header sticky-header">Terça</div>
                        <div class="day-header sticky-header">Quarta</div>
                        <div class="day-header sticky-header">Quinta</div>
                        <div class="day-header sticky-header">Sexta</div>
                        <div class="day-header sticky-header">Sábado</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const ageConfig = {
            "infantil": { label: "Infantil (4-5a)", class: "age-infantil" },
            "fund1": { label: "Fundamental 1 (6-10a)", class: "age-fund1" },
            "fund2": { label: "Fundamental 2 (11-14a)", class: "age-fund2" },
            "adulto": { label: "Jovens e Adultos (15+)", class: "age-adulto" }
        };

        const teachers = [
            // AUGUSTO (SBC)
            { name: "Augusto", courses: ["Cordas", "Prática de Banda"], units: ["sbc"], schedule: [
                { d: 2, h: [14], a: "fund1" }, { d: 2, h: [15], a: "fund2" },
                { d: 3, h: [14], a: "fund1" }, { d: 3, h: [15], a: "fund2" },
                { d: 4, h: [16,17], a: "fund2" }, { d: 4, h: [18,19,20], a: "adulto" }
            ]},
            // CAIO (SCS)
            { name: "Caio", courses: ["Bateria", "Prática de Banda"], units: ["scs"], schedule: [
                { d: 1, h: [9,10,11], a: "fund1" }, { d: 1, h: [13,14,15,16,17], a: "fund2" }, { d: 1, h: [18,19,20], a: "adulto" },
                { d: 2, h: [9,10,11], a: "fund1" }, { d: 2, h: [13,14,15,16,17], a: "fund2" }, { d: 2, h: [18,19,20], a: "adulto" },
                { d: 3, h: [9,10,11], a: "fund1" }, { d: 3, h: [13,14,15,16,17], a: "fund2" }, { d: 3, h: [18,19,20], a: "adulto" },
                { d: 4, h: [9,10,11], a: "fund1" }, { d: 4, h: [13,14,15,16,17], a: "fund2" }, { d: 4, h: [18,19,20], a: "adulto" }
            ]},
            // MORETTI (SBC)
            { name: "Moretti", courses: ["Canto", "Teclas", "Prática de Banda", "Iniciação Musical"], units: ["sbc"], schedule: [
                { d: 1, h: [13], a: "fund1" }, { d: 1, h: [14,15], a: "adulto" },
                { d: 2, h: [13], a: "fund1" }, { d: 2, h: [14,15], a: "adulto" },
                { d: 3, h: [13,14], a: "fund1" }, { d: 3, h: [15,16], a: "adulto" },
                { d: 4, h: [13,14], a: "fund1" }, { d: 4, h: [15,16], a: "adulto" },
                { d: 5, h: [13,14], a: "fund1" }, { d: 5, h: [15,16], a: "adulto" }
            ]},
            // LUAN (SBC)
            { name: "Luan", courses: ["Baixo", "Prática de Banda"], units: ["sbc"], schedule: [
                { d: 1, h: [17], a: "fund2" }, { d: 1, h: [18,19,20,21], a: "adulto" },
                { d: 2, h: [10,11], a: "fund1" }, { d: 2, h: [13,14,15,16,17], a: "fund2" }, { d: 2, h: [18,19,20,21], a: "adulto" },
                { d: 3, h: [10,11], a: "fund1" }, { d: 3, h: [13,14,15,16,17], a: "fund2" }, { d: 3, h: [18,19,20,21], a: "adulto" },
                { d: 4, h: [12,13,14], a: "fund1" }, { d: 4, h: [15,16], a: "fund2" }
            ]},
            // MARCELA (Híbrida)
            { name: "Marcela S.", courses: ["Violino", "Musicalização", "Teatro"], units: ["sbc", "scs"], schedule: [
                { d: 1, h: [9,10], a: "infantil", u: 'sbc' }, { d: 1, h: [11], a: "fund1", u: 'sbc' },
                { d: 3, h: [9,10], a: "infantil", u: 'sbc' }, { d: 3, h: [11], a: "fund1", u: 'sbc' },
                { d: 4, h: [14,15], a: "infantil", u: 'scs' }, { d: 4, h: [16,17], a: "fund1", u: 'scs' },
                { d: 5, h: [9,10], a: "infantil", u: 'scs' }, { d: 5, h: [11], a: "fund1", u: 'scs' }
            ]},
            // MARINA (SBC)
            { name: "Marina", courses: ["Musicalização", "Prática de Banda"], units: ["sbc"], schedule: [
                { d: 1, h: [9,10,11], a: "infantil" }, { d: 1, h: [13,14,15], a: "fund1" },
                { d: 4, h: [9,10,11], a: "infantil" }
            ]},
            // KAREN (Todas)
            { name: "Karen", courses: ["Canto", "Prática de Banda"], units: ["sbc", "scs"], schedule: [
                { d: 2, h: [10], a: "fund1" }, { d: 2, h: [11,12,13,14], a: "fund2" },
                { d: 3, h: [10], a: "fund1" }, { d: 3, h: [11,12,13,14], a: "fund2" },
                { d: 4, h: [10], a: "fund1" }, { d: 4, h: [11,12,13,14], a: "fund2" },
                { d: 5, h: [10], a: "fund1" }, { d: 5, h: [11,12,13,14], a: "fund2" },
                { d: 6, h: [10,11,12], a: "fund1" }, { d: 6, h: [13,14], a: "fund2" }
            ]},
            // LUCAS (Todas)
            { name: "Lucas K.", courses: ["Cordas", "Teclas", "Musicalização", "Prática de Banda"], units: ["sbc", "scs"], schedule: [
                { d: 1, h: [9,10,11], a: "fund1" }, { d: 1, h: [12,13,14,15], a: "fund2" },
                { d: 2, h: [9,10,11], a: "fund1" },
                { d: 4, h: [9,10,11], a: "fund1" },
                { d: 5, h: [18,19,20], a: "adulto" },
                { d: 6, h: [13,14,15,16], a: "fund2" }
            ]},
            // GABRIEL C (SCS)
            { name: "Gabriel C.", courses: ["Cordas", "Teclas", "Prática de Banda"], units: ["scs"], schedule: [
                { d: 1, h: [9,10,11], a: "fund1" }, { d: 1, h: [13,14,15,16,17], a: "fund2" }, { d: 1, h: [18,19,20], a: "adulto" },
                { d: 2, h: [9,10,11], a: "fund1" }, { d: 2, h: [13,14,15,16,17], a: "fund2" },
                { d: 3, h: [9,10,11,12,13], a: "fund1" },
                { d: 5, h: [9,10,11,12], a: "fund1" }, { d: 5, h: [13,14,15,16,17], a: "fund2" }, { d: 5, h: [18,19,20], a: "adulto" }
            ]}
        ];

        let currentUnit = 'sbc';
        let currentFilter = 'all';

        function render() {
            const grid = document.getElementById('calendar');
            grid.querySelectorAll('.time-col, .slot').forEach(el => el.remove());

            for (let h = 9; h <= 21; h++) {
                const timeCol = document.createElement('div');
                timeCol.className = 'time-col';
                timeCol.textContent = `${h}:00`;
                grid.appendChild(timeCol);

                for (let d = 1; d <= 6; d++) {
                    const slot = document.createElement('div');
                    slot.className = 'slot';

                    // Agrupar por Faixa Etária
                    const ageBuckets = { infantil: [], fund1: [], fund2: [], adulto: [] };

                    teachers.forEach(teacher => {
                        const inUnit = teacher.units.includes(currentUnit);
                        const sessions = teacher.schedule.filter(s => {
                            const uMatch = s.u ? s.u === currentUnit : true;
                            return s.d === d && s.h.includes(h) && uMatch;
                        });

                        sessions.forEach(session => {
                            const info = {
                                name: teacher.name,
                                courses: teacher.courses.filter(c => c !== "Prática de Banda").join(', ')
                            };
                            if (!ageBuckets[session.a].some(p => p.name === info.name)) {
                                ageBuckets[session.a].push(info);
                            }
                        });
                    });

                    // Renderizar buckets
                    Object.keys(ageConfig).forEach(ageKey => {
                        if (ageBuckets[ageKey].length > 0) {
                            const isFiltered = currentFilter !== 'all' && currentFilter !== ageKey;
                            const card = document.createElement('div');
                            card.className = `age-card ${ageConfig[ageKey].class} ${isFiltered ? 'filtered-out' : ''}`;
                            
                            const label = document.createElement('span');
                            label.className = 'age-group-label';
                            label.textContent = ageConfig[ageKey].label;
                            
                            const profInfo = document.createElement('div');
                            profInfo.className = 'course-prof-info';
                            profInfo.innerHTML = ageBuckets[ageKey].map(p => 
                                `<div><span class="opacity-70">${p.courses}:</span> ${p.name}</div>`
                            ).join('');

                            card.appendChild(label);
                            card.appendChild(profInfo);
                            slot.appendChild(card);
                        }
                    });

                    grid.appendChild(slot);
                }
            }
        }

        function switchUnit(unit) {
            currentUnit = unit;
            document.getElementById('btn-sbc').className = unit === 'sbc' ? 'active px-8 py-2 text-sm font-black rounded-lg transition-all' : 'px-8 py-2 text-sm font-black rounded-lg text-slate-500 hover:bg-slate-200';
            document.getElementById('btn-scs').className = unit === 'scs' ? 'active px-8 py-2 text-sm font-black rounded-lg transition-all' : 'px-8 py-2 text-sm font-black rounded-lg text-slate-500 hover:bg-slate-200';
            render();
        }

        function applyFilter() {
            currentFilter = document.getElementById('age-filter').value;
            render();
        }

        window.onload = render;
    </script>
</body>
</html>
